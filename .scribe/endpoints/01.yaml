name: Citizen
description: ''
endpoints:
  -
    custom: []
    httpMethods:
      - GET
    uri: api/v1/concerns
    metadata:
      custom: []
      groupName: Citizen
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'List My Concerns'
      description: |-
        Retrieve all concerns submitted by the authenticated citizen user.
        Includes media attachments, distribution status, and history.
      authenticated: true
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "concerns": [
                {
                  "id": 1,
                  "type": "manual",
                  "tracking_code": "CN-20231227-ABCD",
                  "title": "Broken Streetlight",
                  "description": "The streetlight on Main St is broken",
                  "category": "infrastructure",
                  "severity": "low",
                  "status": "pending",
                  "latitude": 16.4023,
                  "longitude": 120.5960,
                  "address": "Main St, Baguio City",
                  "created_at": "2023-12-27T10:00:00.000000Z",
                  "media": [],
                  "distribution": {
                    "status": "assigned",
                    "purok_leader": {
                      "name": "Juan Dela Cruz"
                    }
                  },
                  "histories": []
                }
              ]
            },
            "message": "Manual concerns retrieved successfully"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "An error occurred while retrieving concerns: error details"
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/v1/concerns
    metadata:
      custom: []
      groupName: Citizen
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Submit New Concern'
      description: |-
        Submit a new concern (manual or voice) with optional media attachments and location information.
        Automatically generates a tracking code and assigns to Purok Leader.
        Voice concerns will be transcribed in the background.
      authenticated: true
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      type:
        custom: []
        name: type
        description: 'Concern type (manual, voice).'
        required: true
        example: manual
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      title:
        custom: []
        name: title
        description: '(for manual) Concern title (max 100 chars).'
        required: true
        example: 'Broken Streetlight'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      description:
        custom: []
        name: description
        description: '(for manual) Detailed description.'
        required: true
        example: 'The streetlight on Main St is broken and needs repair.'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      category:
        custom: []
        name: category
        description: 'Category (safety, security, infrastructure, environment, noise, other).'
        required: true
        example: infrastructure
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      severity:
        custom: []
        name: severity
        description: 'optional Severity level (low, medium, high). Default: low.'
        required: false
        example: medium
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      transcript_text:
        custom: []
        name: transcript_text
        description: 'optional Transcribed text for voice concerns.'
        required: false
        example: 'There is a broken streetlight'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      longitude:
        custom: []
        name: longitude
        description: 'optional Longitude coordinate (-180 to 180).'
        required: false
        example: 120.596
        type: number
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      latitude:
        custom: []
        name: latitude
        description: 'optional Latitude coordinate (-90 to 90).'
        required: false
        example: 16.4023
        type: number
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      address:
        custom: []
        name: address
        description: 'optional Full address.'
        required: false
        example: 'Main St, Baguio City'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      custom_location:
        custom: []
        name: custom_location
        description: 'optional Custom location description.'
        required: false
        example: 'Near the park'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        deprecated: false
      files:
        custom: []
        name: files
        description: 'optional Media files (images or audio, max 3 files, 10MB each).'
        required: false
        example:
          - image1.jpg
          - audio.mp3
        type: 'file[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      type: manual
      title: 'Broken Streetlight'
      description: 'The streetlight on Main St is broken and needs repair.'
      category: infrastructure
      severity: medium
      transcript_text: 'There is a broken streetlight'
      longitude: 120.596
      latitude: 16.4023
      address: 'Main St, Baguio City'
      custom_location: 'Near the park'
      files:
        - image1.jpg
        - audio.mp3
    fileParameters: []
    responses:
      -
        custom: []
        status: 201
        content: |-
          {
            "success": true,
            "data": {
              "concern": {
                "id": 1,
                "type": "manual",
                "tracking_code": "CN-20231227-ABCD",
                "title": "Broken Streetlight",
                "description": "The streetlight on Main St is broken",
                "category": "infrastructure",
                "severity": "medium",
                "status": "pending",
                "created_at": "2023-12-27T10:00:00.000000Z",
                "media": [
                  {
                    "id": 1,
                    "media_type": "image",
                    "original_path": "https://example.com/image.jpg"
                  }
                ],
                "distribution": {
                  "status": "assigned",
                  "assigned_at": "2023-12-27T10:00:00.000000Z"
                }
              }
            },
            "message": "Concern submitted successfully!"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 422
        content: |-
          {
            "success": false,
            "message": "Validation failed",
            "errors": {
              "title": ["Title is required."]
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "An error occurred while submitting concern: error details"
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - GET
    uri: 'api/v1/concerns/{id}'
    metadata:
      custom: []
      groupName: Citizen
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Get Concern Details'
      description: |-
        Retrieve detailed information about a specific concern submitted by the authenticated user.
        Includes media, distribution status, and action history.
      authenticated: true
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: 'The ID of the concern.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "concern": {
                "id": 1,
                "type": "manual",
                "tracking_code": "CN-20231227-ABCD",
                "title": "Broken Streetlight",
                "description": "The streetlight on Main St is broken",
                "category": "infrastructure",
                "severity": "medium",
                "status": "pending",
                "latitude": 16.4023,
                "longitude": 120.5960,
                "address": "Main St, Baguio City",
                "created_at": "2023-12-27T10:00:00.000000Z",
                "media": [
                  {
                    "id": 1,
                    "media_type": "image",
                    "original_path": "https://example.com/image.jpg"
                  }
                ],
                "distribution": {
                  "status": "assigned",
                  "purok_leader": {
                    "name": "Juan Dela Cruz",
                    "officialDetails": {
                      "position": "Purok Leader"
                    }
                  }
                },
                "histories": [
                  {
                    "id": 1,
                    "status": "pending",
                    "remarks": "Concern submitted and automatically distributed to Purok Leader.",
                    "created_at": "2023-12-27T10:00:00.000000Z"
                  }
                ]
              }
            },
            "message": "Manual concern retrieved successfully"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "Manual concern not found or you do not have permission to view it"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "An error occurred while retrieving concern: error details"
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - PUT
      - PATCH
    uri: 'api/v1/concerns/{id}'
    metadata:
      custom: []
      groupName: Citizen
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Update Concern'
      description: 'Update the title and description of a concern. Only concerns belonging to the authenticated user can be updated.'
      authenticated: true
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: 'The ID of the concern.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      title:
        custom: []
        name: title
        description: 'optional Updated concern title.'
        required: false
        example: 'Updated Streetlight Issue'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      description:
        custom: []
        name: description
        description: 'optional Updated description.'
        required: false
        example: 'Updated description text'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      title: 'Updated Streetlight Issue'
      description: 'Updated description text'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "concern": {
                "id": 1,
                "title": "Updated Streetlight Issue",
                "description": "Updated description text",
                "updated_at": "2023-12-27T11:00:00.000000Z"
              }
            },
            "message": "Manual concern updated successfully"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "Manual concern not found or you do not have permission to update it"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 422
        content: |-
          {
            "success": false,
            "message": "Validation failed",
            "errors": {}
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "An error occurred while updating concern: error details"
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - DELETE
    uri: 'api/v1/concerns/{id}'
    metadata:
      custom: []
      groupName: Citizen
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Delete Concern'
      description: 'Soft delete a concern. Only concerns belonging to the authenticated user can be deleted.'
      authenticated: true
      deprecated: false
    headers:
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: 'The ID of the concern to delete.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "concern_id": "1"
            },
            "message": "Manual concern deleted successfully"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "Manual concern not found or you do not have permission to delete it"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 500
        content: |-
          {
            "success": false,
            "message": "An error occurred while deleting concern: error details"
          }
        headers: []
        description: ''
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
